import{j as t,r as o,d as y,O as G}from"./index-DRxsmueX.js";import{B as H,S as q,c as N}from"./button-CfcsZ7n8.js";import{k as C}from"./components-CzXVTnO_.js";import{C as K}from"./chat._index-4wo_XEFl.js";function v({...e}){return t.jsx(H,{variant:"outline",size:"icon",...e,children:e.children})}/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),A=(...e)=>e.filter((r,a,n)=>!!r&&n.indexOf(r)===a).join(" ");/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var V={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=o.forwardRef(({color:e="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:l,...c},d)=>o.createElement("svg",{ref:d,...V,width:r,height:r,stroke:e,strokeWidth:n?Number(a)*24/Number(r):a,className:A("lucide",s),...c},[...l.map(([u,f])=>o.createElement(u,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=(e,r)=>{const a=o.forwardRef(({className:n,...s},i)=>o.createElement(W,{ref:i,iconNode:r,className:A(`lucide-${D(e)}`,n),...s}));return a.displayName=`${e}`,a};/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=L("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=L("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);function J(e){return t.jsx("header",{className:"p-2",children:t.jsx("nav",{children:t.jsxs("ul",{className:"flex space-x-4 items-center",children:[e.isSideBarIconShow&&t.jsx(v,{className:"border-none",onClick:()=>e.handleSideBarOpen(!0),children:t.jsx(k,{className:"h-4 w-4"})}),t.jsx(C,{to:"/chat/",unstable_viewTransition:!0,children:t.jsx(v,{className:"border-none",children:t.jsx(Z,{className:"h-4 w-4"})})})]})})})}function Q(e,r=[]){let a=[];function n(i,l){const c=o.createContext(l),d=a.length;a=[...a,l];function u(h){const{scope:m,children:p,...x}=h,T=(m==null?void 0:m[e][d])||c,z=o.useMemo(()=>x,Object.values(x));return t.jsx(T.Provider,{value:z,children:p})}function f(h,m){const p=(m==null?void 0:m[e][d])||c,x=o.useContext(p);if(x)return x;if(l!==void 0)return l;throw new Error(`\`${h}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,f]}const s=()=>{const i=a.map(l=>o.createContext(l));return function(c){const d=(c==null?void 0:c[e])||i;return o.useMemo(()=>({[`__scope${e}`]:{...c,[e]:d}}),[c,d])}};return s.scopeName=e,[n,U(s,...r)]}function U(...e){const r=e[0];if(e.length===1)return r;const a=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const l=n.reduce((c,{useScope:d,scopeName:u})=>{const h=d(i)[`__scope${u}`];return{...c,...h}},{});return o.useMemo(()=>({[`__scope${r.scopeName}`]:l}),[l])}};return a.scopeName=r.scopeName,a}function X(e){const r=o.useRef(e);return o.useEffect(()=>{r.current=e}),o.useMemo(()=>(...a)=>{var n;return(n=r.current)==null?void 0:n.call(r,...a)},[])}var I=globalThis!=null&&globalThis.document?o.useLayoutEffect:()=>{},Y=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],S=Y.reduce((e,r)=>{const a=o.forwardRef((n,s)=>{const{asChild:i,...l}=n,c=i?q:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(c,{...l,ref:s})});return a.displayName=`Primitive.${r}`,{...e,[r]:a}},{}),b="Avatar",[ee,le]=Q(b),[te,E]=ee(b),$=o.forwardRef((e,r)=>{const{__scopeAvatar:a,...n}=e,[s,i]=o.useState("idle");return t.jsx(te,{scope:a,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:t.jsx(S.span,{...n,ref:r})})});$.displayName=b;var B="AvatarImage",P=o.forwardRef((e,r)=>{const{__scopeAvatar:a,src:n,onLoadingStatusChange:s=()=>{},...i}=e,l=E(B,a),c=re(n),d=X(u=>{s(u),l.onImageLoadingStatusChange(u)});return I(()=>{c!=="idle"&&d(c)},[c,d]),c==="loaded"?t.jsx(S.img,{...i,ref:r,src:n}):null});P.displayName=B;var R="AvatarFallback",M=o.forwardRef((e,r)=>{const{__scopeAvatar:a,delayMs:n,...s}=e,i=E(R,a),[l,c]=o.useState(n===void 0);return o.useEffect(()=>{if(n!==void 0){const d=window.setTimeout(()=>c(!0),n);return()=>window.clearTimeout(d)}},[n]),l&&i.imageLoadingStatus!=="loaded"?t.jsx(S.span,{...s,ref:r}):null});M.displayName=R;function re(e){const[r,a]=o.useState("idle");return I(()=>{if(!e){a("error");return}let n=!0;const s=new window.Image,i=l=>()=>{n&&a(l)};return a("loading"),s.onload=i("loaded"),s.onerror=i("error"),s.src=e,()=>{n=!1}},[e]),r}var O=$,_=P,F=M;const g=o.forwardRef(({className:e,...r},a)=>t.jsx(O,{ref:a,className:N("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...r}));g.displayName=O.displayName;const w=o.forwardRef(({className:e,...r},a)=>t.jsx(_,{ref:a,className:N("aspect-square h-full w-full",e),...r}));w.displayName=_.displayName;const j=o.forwardRef(({className:e,...r},a)=>t.jsx(F,{ref:a,className:N("flex h-full w-full items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800",e),...r}));j.displayName=F.displayName;const ae=e=>{const r=e.match(/\/chat\/(\d+)/);return r?Number.parseInt(r[1],10):null};function ne(e){const r=y(),a=K,n=ae(r.pathname);return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"w-80 h-screen border-r",style:{viewTransitionName:"sidebar"},children:[t.jsx("div",{className:"p-2 border-b border-zinc-300",children:t.jsx("nav",{children:t.jsx("ul",{className:"flex space-x-4 items-center",children:t.jsx(v,{className:"border-none",onClick:e.handleSideBarOpen,children:t.jsx(k,{className:"h-4 w-4"})})})})}),a.map(s=>t.jsx(t.Fragment,{children:s.channel===n?t.jsxs("div",{className:"bg-zinc-200 border-b border-zinc-300 p-1 flex flex-row items-center gap-3",children:[t.jsxs(g,{children:[t.jsx(w,{src:s.image,alt:"friend-icon"}),t.jsx(j,{children:"CN"})]}),t.jsx("p",{className:"text-xs text-zinc-700 whitespace-break-spaces",children:s.comment})]},`channel${s.channel}`):t.jsxs(C,{to:`/chat/${s.channel}`,unstable_viewTransition:!0,className:"border-b border-zinc-300 p-1 flex flex-row items-center gap-3",children:[t.jsxs(g,{children:[t.jsx(w,{src:s.image,alt:"friend-icon"}),t.jsx(j,{children:"CN"})]}),t.jsx("p",{className:"text-xs text-zinc-700 whitespace-break-spaces",children:s.comment})]},`channel${s.channel}`)}))]})})}function de(){const e=y(),[r,a]=o.useState(!1);return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex flex-row w-full",style:{viewTransitionName:r?"chat-to-chat":""},children:[r&&e.pathname!=="/chat/"&&t.jsx(ne,{handleSideBarOpen:()=>a(n=>!n)}),t.jsxs("div",{className:"w-full",children:[t.jsx("div",{children:t.jsx(J,{handleSideBarOpen:n=>a(n),isSideBarIconShow:!r&&e.pathname!=="/chat/"})}),t.jsx("div",{className:"w-full flex justify-center mb-4",children:t.jsx("div",{className:"w-10/12",children:t.jsx(G,{})})})]})]})})}export{de as default};
